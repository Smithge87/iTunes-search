<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <meta name="Search API" content="Search API" />
    <title>Search API</title>
    <link rel="stylesheet" type="text/css" href="SearchAPI.css">
</head>
<body>

  <div class="jumbotron jumbotron-fluid">
    <div class="container">
      <h1 class="display-3">Search API</h1>
      <p class="lead">This is a search apparatus that interacta with the iTunes marketplace</p>
    </div>
  </div>
  <div class="container">
    <form id="requestForm">
    <div class="form-group">
      <label for="formGroupExampleInput">Artist</label>
      <input type="text" class="form-control" id="artistName" placeholder="Artist Name">
    </div>
    <div class="form-group">
      <label for="formGroupExampleInput2">Song</label>
      <input type="text" class="form-control" id="songName" placeholder="Song Name">
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>
<div>
  <ul id="artistList">
    <li></li>
  </ul>

</div>


<script>

function parseForm(data){
  var artist = "https://itunes.apple.com/search?term="+(data[0]["artist"]);
  return artist;
  }




$('form').submit(function(event) {
  event.preventDefault();
  var formData = [{
    			"artist":$("#artistName").val(),
    			"song": $("#songName").val(),
  }];
  var points = parseForm(formData);

  $.ajax({
			type 		: "GET",
			url 		: points,
			dataType 	: "jsonp",
      success : function(results){
        parseResults(results);
var name = "anything";
      },
      error : function(results){console.log(results)}
  });

});
function parseResults(result){
  var currentResults = ""
  for (let i=0;i<result.results.length;i++){
    currentResults = result["results"][(i.toString())]["artistName"];
    if (i==0){
        $("#artistList").html("<li>"+currentResults+"</li>");
    }
    else{
        $("#artistList").append("<li>"+currentResults+"</li>");
    }
  }
}

</script>











</body>
</html>
